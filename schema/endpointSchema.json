{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Endpoint Resource",
    "type": "object",
    "description": "Endpoint Resource details: a read, subscribe or write property must be defined.\nDocs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
    "propertyNames": {
        "enum": [
            "protocol",
            "connection",
            "qos",
            "agentName",
            "retain",
            "targetState",
            "read",
            "subscribe",
            "write",
            "inputBuffering",
            "buffering",
            "rules",
            "topic",
            "topicPrefix"
        ]
    },
    "definitions": {
        "AdsEndpoint": {
            "$ref": "referenced/AdsEndpoint.json#/definitions/address"
        },
        "BacnetEndpoint": {
            "$ref": "referenced/BacnetEndpoint.json#/definitions/address"
        },
        "EthernetIpEndpoint": {
            "$ref": "referenced/EthernetIpEndpoint.json#/definitions/address"
        },
        "FocasEndpoint": {
            "$ref": "referenced/FocasEndpoint.json#/definitions/address"
        },
        "GenericVrpcEndpoint": {
            "$ref": "referenced/GenericVrpcEndpoint.json#/definitions/address"
        },
        "HbmdaqEndpoint": {
            "$ref": "referenced/HbmdaqEndpoint.json#/definitions/address"
        },
        "HeidenhainEndpoint": {
            "$ref": "referenced/HeidenhainEndpoint.json#/definitions/address"
        },
        "HttpEndpoint": {
            "$ref": "referenced/HttpEndpoint.json#/definitions/address"
        },
        "InfluxdbEndpoint": {
            "$ref": "referenced/InfluxdbEndpoint.json#/definitions/address"
        },
        "KafkaEndpoint": {
            "$ref": "referenced/KafkaEndpoint.json#/definitions/address"
        },
        "ModbusEndpoint": {
            "$ref": "referenced/ModbusEndpoint.json#/definitions/address"
        },
        "MqttEndpoint": {
            "$ref": "referenced/MqttEndpoint.json#/definitions/address"
        },
        "MssqlEndpoint": {
            "$ref": "referenced/MssqlEndpoint.json#/definitions/address"
        },
        "OpcdaEndpoint": {
            "$ref": "referenced/OpcdaEndpoint.json#/definitions/address"
        },
        "OpcuaEndpoint": {
            "$ref": "referenced/OpcuaEndpoint.json#/definitions/address"
        },
        "ProfinetEndpoint": {
            "$ref": "referenced/ProfinetEndpoint.json#/definitions/address"
        },
        "S7Endpoint": {
            "$ref": "referenced/S7Endpoint.json#/definitions/address"
        },
        "ShdrEndpoint": {
            "$ref": "referenced/ShdrEndpoint.json#/definitions/address"
        },
        "SinumerikEndpoint": {
            "$ref": "referenced/SinumerikEndpoint.json#/definitions/address"
        },
        "SystemstateEndpoint": {
            "$ref": "referenced/SystemstateEndpoint.json#/definitions/address"
        },
        "SopasEndpoint": {
            "$ref": "referenced/SopasEndpoint.json#/definitions/address"
        },
        "SqlEndpoint": {
            "$ref": "referenced/SqlEndpoint.json#/definitions/address"
        },
        "WermaEndpoint": {
            "$ref": "referenced/WermaEndpoint.json#/definitions/address"
        },
        "CybusRule": {
            "$ref": "./objects/CybusRule.json"
        }
    },
    "properties": {
        "protocol": {
            "description": "Identifies the protocol for which a connection should be established",
            "type": "string",
            "enum": [
                "Ads",
                "Bacnet",
                "EthernetIp",
                "Focas",
                "GenericVrpc",
                "Hbmdaq",
                "Heidenhain",
                "Http",
                "Influxdb",
                "Kafka",
                "Modbus",
                "Mqtt",
                "Mssql",
                "Opcda",
                "Opcua",
                "Profinet",
                "S7",
                "Shdr",
                "Sinumerik",
                "Sopas",
                "Sql",
                "Systemstate",
                "Werma"
            ]
        },
        "agentName": {
            "type": "string",
            "description": "Obsolete - this value is no longer being used. The agentName of the referenced connection is used always.",
            "default": "protocol-mapper"
        },
        "connection": {
            "type": "string",
            "title": "Physical address of an existing connection resource",
            "description": "refrence a connection resource or type your conntion hostName",
            "examples": [
                "!ref <ConnectionResourceName>"
            ]
        },
        "qos": {
            "type": "integer",
            "default": 0,
            "description": "Quality of service for mqtt messages"
        },
        "retain": {
            "type": "boolean",
            "default": false,
            "description": "Whether the last message should be retained (last-value-cached) on the internal broker"
        },
        "targetState": {
            "type": "string",
            "title": "The targeted state for this connection",
            "enum": [
                "disabled",
                "enabled"
            ],
            "default": "enabled",
            "examples": [
                "disabled",
                "enabled"
            ]
        }
    },
    "required": [
        "protocol",
        "connection"
    ],
    "oneOf": [
        {
            "required": [
                "read"
            ]
        },
        {
            "required": [
                "subscribe"
            ]
        },
        {
            "required": [
                "write"
            ]
        }
    ],
    "allOf": [
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Ads"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/AdsEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/AdsEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/AdsEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Bacnet"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/BacnetEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/BacnetEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/BacnetEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "EthernetIp"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/EthernetIpEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/EthernetIpEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/EthernetIpEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Focas"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/FocasEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/FocasEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "GenericVrpc"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/GenericVrpcEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/GenericVrpcEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/GenericVrpcEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Hbmdaq"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/HbmdaqEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/HbmdaqEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/HbmdaqEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Heidenhain"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/HeidenhainEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/HeidenhainEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/HeidenhainEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Http"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/HttpEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/HttpEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/HttpEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Influxdb"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/InfluxdbEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/InfluxdbEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/InfluxdbEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Kafka"
                    }
                }
            },
            "then": {
                "properties": {
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/KafkaEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Modbus"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/ModbusEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/ModbusEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/ModbusEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Mqtt"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/MqttEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/MqttEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/MqttEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Mssql"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/MssqlEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/MssqlEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/MssqlEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Opcda"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/OpcdaEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/OpcdaEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/OpcdaEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Opcua"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/OpcuaEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/OpcuaEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/OpcuaEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Profinet"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/ProfinetEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/ProfinetEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/ProfinetEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "S7"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/S7Endpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/S7Endpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/S7Endpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Shdr"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/ShdrEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/ShdrEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/ShdrEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Sinumerik"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/SinumerikEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/SinumerikEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/SinumerikEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Sopas"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/SopasEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/SopasEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/SopasEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Sql"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/SqlEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/SqlEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/SqlEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Systemstate"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/SystemstateEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/SystemstateEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "protocol"
                ],
                "properties": {
                    "protocol": {
                        "const": "Werma"
                    }
                }
            },
            "then": {
                "properties": {
                    "read": {
                        "title": "Read details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/WermaEndpoint"
                    },
                    "subscribe": {
                        "title": "Subscribe details",
                        "description": "Read details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/WermaEndpoint"
                    },
                    "write": {
                        "title": "Write details",
                        "description": "Write details; you may only provide one of read, subscribe or write per endpoint. Docs: https://docs.cybus.io/documentation/services/service-commissioning-files/structure-of-service-commissioning-files/resources/cybus-endpoint#subscribe-read-write",
                        "$ref": "#/definitions/WermaEndpoint"
                    }
                }
            }
        },
        {
            "if": {
                "required": [
                    "write"
                ]
            },
            "then": {
                "properties": {
                    "buffering": {
                        "type": "object",
                        "additionalProperties": false,
                        "title": "Output Buffering for write endpoints",
                        "properties": {
                            "enabled": {
                                "type": "boolean",
                                "title": "Enable Buffering",
                                "default": false
                            },
                            "keepOrder": {
                                "type": "boolean",
                                "title": "Keep Delivery Order",
                                "default": true
                            },
                            "burstInterval": {
                                "type": "number",
                                "title": "Burst Interval",
                                "default": 100
                            },
                            "burstSize": {
                                "type": "number",
                                "title": "Burst Size",
                                "default": 1
                            },
                            "bufferMaxSize": {
                                "type": "number",
                                "title": "Buffer Max Size",
                                "default": 100000
                            },
                            "bufferMaxAge": {
                                "type": "number",
                                "title": "Buffer Max Age",
                                "default": 86400
                            }
                        }
                    }
                },
                "propertyNames": {
                    "enum": [
                        "protocol",
                        "connection",
                        "qos",
                        "agentName",
                        "retain",
                        "targetState",
                        "write",
                        "inputBuffering",
                        "buffering",
                        "rules",
                        "topic",
                        "topicPrefix"
                    ]
                }
            }
        },
        {
            "if": {
                "required": [
                    "read"
                ]
            },
            "then": {
                "properties": {
                    "inputBuffering": {
                        "type": "object",
                        "title": "Input buffering properties",
                        "description": "Properties to define the behaviour of the input buffering",
                        "additionalProperties": false,
                        "properties": {
                            "enabled": {
                                "title": "Enable Buffering",
                                "type": "boolean",
                                "description": "Whether input buffering should be enabled or not",
                                "default": false
                            },
                            "maxConcurrentMessages": {
                                "title": "Maximum concurrent messages",
                                "type": "integer",
                                "description": "Maximum number of concurrently processed messages as long as the input buffer queue is non-empty.",
                                "default": 2
                            },
                            "maxInputBufferSize": {
                                "title": "Maximum input buffer size",
                                "type": "integer",
                                "description": "Maximum number of input messages that are queued in the input buffer. Exceeding messages will be discarded. Adjust this to a higher value if you are handling bursty traffic.",
                                "default": 5000
                            },
                            "waitingTimeOnEmptyQueue": {
                                "title": "Waiting time during empty queue",
                                "type": "integer",
                                "description": "Waiting time in milliseconds after the input buffer queue ran empty and before checking again for newly queued input messages. Regardless of this value, on non-empty input buffer queue all messages will be processed without waiting time in between until the queue is empty again.",
                                "default": 10
                            }
                        },
                        "examples": [
                            {
                                "enabled": true,
                                "maxConcurrentMessages": 2,
                                "maxInputBufferSize": 5000,
                                "waitingTimeOnEmptyQueue": 10
                            }
                        ]
                    },
                    "rules": {
                        "type": "array",
                        "title": "Rules to be applied to the endpoint",
                        "items": {
                            "$ref": "#/definitions/CybusRule"
                        },
                        "examples": [
                            [
                                {
                                    "topic": "cybus/#"
                                }
                            ]
                        ]
                    },
                    "topic": {
                        "type": "string",
                        "title": "Custom topic this endpoint should use",
                        "pattern": "^[^#+]*$",
                        "examples": [
                            "hall1/sensor1"
                        ]
                    },
                    "topicPrefix": {
                        "type": "string",
                        "title": "Prefixes all topics",
                        "pattern": "^[^#+]*$",
                        "examples": [
                            "cybus"
                        ]
                    }
                },
                "propertyNames": {
                    "enum": [
                        "protocol",
                        "connection",
                        "qos",
                        "agentName",
                        "retain",
                        "targetState",
                        "read",
                        "inputBuffering",
                        "buffering",
                        "rules",
                        "topic",
                        "topicPrefix"
                    ]
                }
            }
        },
        {
            "if": {
                "required": [
                    "subscribe"
                ]
            },
            "then": {
                "properties": {
                    "inputBuffering": {
                        "type": "object",
                        "title": "Input buffering properties",
                        "description": "Properties to define the behaviour of the input buffering",
                        "additionalProperties": false,
                        "properties": {
                            "enabled": {
                                "title": "Enable Buffering",
                                "type": "boolean",
                                "description": "Whether input buffering should be enabled or not",
                                "default": false
                            },
                            "maxConcurrentMessages": {
                                "title": "Maximum concurrent messages",
                                "type": "integer",
                                "description": "Maximum number of concurrently processed messages as long as the input buffer queue is non-empty.",
                                "default": 2
                            },
                            "maxInputBufferSize": {
                                "title": "Maximum input buffer size",
                                "type": "integer",
                                "description": "Maximum number of input messages that are queued in the input buffer. Exceeding messages will be discarded. Adjust this to a higher value if you are handling bursty traffic.",
                                "default": 5000
                            },
                            "waitingTimeOnEmptyQueue": {
                                "title": "Waiting time during empty queue",
                                "type": "integer",
                                "description": "Waiting time in milliseconds after the input buffer queue ran empty and before checking again for newly queued input messages. Regardless of this value, on non-empty input buffer queue all messages will be processed without waiting time in between until the queue is empty again.",
                                "default": 10
                            }
                        }
                    },
                    "rules": {
                        "type": "array",
                        "title": "Rules to be applied to the endpoint",
                        "items": {
                            "$ref": "#/definitions/CybusRule"
                        }
                    },
                    "topic": {
                        "type": "string",
                        "title": "Custom topic this endpoint should use",
                        "pattern": "^[^#+]*$",
                        "examples": [
                            "hall1/sensor1"
                        ]
                    },
                    "topicPrefix": {
                        "type": "string",
                        "title": "Prefixes all topics",
                        "pattern": "^[^#+]*$",
                        "examples": [
                            "cybus"
                        ]
                    }
                },
                "propertyNames": {
                    "enum": [
                        "protocol",
                        "connection",
                        "qos",
                        "agentName",
                        "retain",
                        "targetState",
                        "subscribe",
                        "inputBuffering",
                        "buffering",
                        "rules",
                        "topic",
                        "topicPrefix"
                    ]
                }
            }
        }
    ],
    "examples": [
        {
            "protocol": "",
            "connection": "!ref <ConnectionResourceName>",
            "read": {}
        },
        {
            "protocol": "",
            "connection": "!ref <ConnectionResourceName>",
            "subscribe": {}
        },
        {
            "protocol": "",
            "connection": "!ref <ConnectionResourceName>",
            "write": {}
        }
    ],
    "errorMessage": {
        "required": "One of read, subscribe or write must be provided",
        "oneOf": "Exactly one of read, subscribe or write must be provided",
        "additionalProperties": "Custom properties are not allowed"
    }
}